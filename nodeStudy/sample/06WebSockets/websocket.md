- Web Sockets are a wonderful addition to the HTML5 Spec. They allow for a true two way connection between the client and the server
- Web Sockets use their own protocol to send and receive messages from a TCP Socket server
- The browser can connect to server and leave the connection open so that we can send and receive data(a two way connection open)
- Web Sockets are not just limited to the browser. Through connection, clients can send data that are easily broadcasted to every open connection.
- Settinng up a Web Sockets from scratch on your web application can be a little tricky You need a TCP Socket server and a HTTP proxy.

- There are node marginals that will help us with building our non Web Sockets-- WS module

- And the first that we are going to do is we are going to create a a Web Socket Variable, So, I'll create a variable called WebSocketServer, and this is going to be a constructor that we will get from the WS module. And I'm just going to go ahead and shindshvbshsbh on the server Because the Web Socket Server is going to be the server key of the WS Module. Now the next thing I'm going to do is create an instant server Web Socket server using a constructor. I will call that instant, WSS and then using a new key word, I'm going to go ahead and invoke a new Web Socket Folder.

- And I will give it a port of 3000 So this will create a new Web Socket Server that runs on its own protocol, And we can connect it with WS:// as opposed to HTTP:// What I'm going to set up is a listener for new connections, WSS.on connection will fire this callback function when we have a new socket connected. And that individual Web Socket will be passed to this function as an argument.

- I will call that WS. So you can think of Web Socket as a connected in-point. This means that we have one client connection and every client that connects is going to cause this fall back function to fire and then we can edit their individual connection using this WS variable. What we are going to do is send a message back to each connected socket, ws.send, will send a message back to the client, and we will send this message back after they've made a connection.

- Then we can go ahead and say, "Welcome to cyber chat." Now the next thing that we need to do is travel back to our exercise files and we are also going to need to program the client JavaScript File. So we have this index HTML in our files if you were to look at that, we can open with sublime very quickly. So, here is the index HTML file. We are going to go ahead and add a Client Socket Connection to our new Socket Server from this file. You will notice that this file contain a div that will hold messages on line 11, as well as a form for adding new messages on line 12.

- Whenever we input a new message we will input it into the input field and clicking enter will actually collect our new message and our client JavaScript. So on line 16, we are importing JavaScript from a file called WS client. Lets go ahead and go back to our files, and open up the WS client JavaScript file. So, this is the client file. This is the file that's going to run on the browser, and whenever a user enters a new message, this document forms on the submit functional file and we will gather that message from the input.

- We also a function for setting the title that will actually set the title of the heading one, that is locate on our HTML page, and then we have a function for printing the message. Every time we print a message, we can use the print message function and this will create a new paragraph, set the text of the paragraph to our message, and add our message to the done. I can actually use native JavaScript if my browser supports Web Sockets. And since I'm using Chrome for this lesson today, which do support Web Sockets, so we are going to use some native JavaScript. I'm going to create a Web Socket instance using the new Web Socket constructor.

And when we use this constructor, we have to point out where our Web Socket constructor is running. So Web Socket use their own protocol, so this server is running at ws, localhost port 3000. Now, I'm actually going to use this instance to wire up event handlers. For instance, when the Web Socket opens, I want this function to be invoked. And when our socket opens, I'm going to go ahead and set the title of the page connected to cyber chat.

There we go. When the Web Socket closes, I will use this function. So, when our web socket closes, we will also set the title to disconnected, and when we receive a message from the Web Socket. So when this Web Socket sends a message, this function will fire. And that message will be a part of the object that is sent to this function. I'm going to call it pay load. So, when we connect to this Web Socket, we are going to get sent a message, a welcome message to the Cyber Chat, and every time we get a message, we are simply going to add it to the dump.

So, I'm going to call print message, then send the payload.data to the dump. So whatever message, data that I receive, we will actually print that message on the dump. So let me go ahead and save this, and lets navigate to our terminal and the very first thing that we are going to need to do from our terminal is instal that Web Socket Package. npm install ws, and I will also send this the save, flag.

Great, and with our WS Package installed, we can actually start our package server. I'm going to node ws, because our ws.js file has our Socket Server in it. So our socket server is running, which should have maybe given us a message to let us know that the Socket Server is running, but seeing this cursor flash right here, tells us that the server is in fact running. So, let's go ahead and navigate to our files. Now, this is the neat part about Web Sockets. We actually do not need to set up the index HTML on a server to work work with a Web Sockets. I can simply double click and open this file in a browser and you can see using the file API, that I have connected to the Web Socket, and it says, "Welcome to cyber chat." So, not only have I connected to the Socket, but I've received my first message from the Socket Server.

Now if I go out into the terminal and I stop our web server, with Control C, and then come back to the browser, we will see that our socket has disconnected. So the message at the top of the page has changed from connected to cyber chat, and it is now saying, it's disconnected because we have stopped our Web Sockets Server. We have built the first part of our Web Socket Server, in the next lesson, we will send messages back to this Web Socket Server, so that we can build an official Cyber Chat Room.
